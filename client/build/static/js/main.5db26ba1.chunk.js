(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{144:function(e,t,a){"use strict";a.r(t);var s=a(3),n=a(0),r=a.n(n),i=a(26),c=a.n(i),o=a(21),d=a(82),h=a(37),l=a(9),u=a(154),j=a(158),b=a(160),p=a(156),g=a(155),O=a(13),m=a(14),f=a(8),x=a(16),v=a(15),C=a(159),y=a(157),S=a(79),w=a(18),D=a.n(w),k=function(e){Object(x.a)(a,e);var t=Object(v.a)(a);function a(e){var s;return Object(O.a)(this,a),s=t.call(this,e),console.log(s.props),s.state={username:"",password:"",error:""},s.handleUsernameChange=s.handleUsernameChange.bind(Object(f.a)(s)),s.handlePasswordChange=s.handlePasswordChange.bind(Object(f.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(f.a)(s)),console.log(s.props.user.id),console.log(s.props.user.isLoggedIn),s}return Object(m.a)(a,[{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={username:this.state.username,password:this.state.password};console.log(a),D.a.post("http://localhost:5000/user/signup",a).then((function(e){console.log(e.data),404===e.data.status?t.setState({username:"",password:"",error:e.data.message+". Please try again."}):t.props.history.replace({pathname:"/user/login",data:{msg:"User successfully registered! Please login to continue."}})}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"text-center",children:[Object(s.jsx)("h3",{className:"mt-3 mb-3",children:"Register User"}),this.state.error&&Object(s.jsxs)(C.a,{variant:"danger",children:[" ",this.state.error," "]}),Object(s.jsxs)(y.a,{onSubmit:this.handleSubmit,children:[Object(s.jsxs)(y.a.Group,{children:[Object(s.jsx)(y.a.Control,{type:"text",placeholder:"Username",value:this.state.username,onChange:this.handleUsernameChange}),Object(s.jsx)("br",{}),Object(s.jsx)(y.a.Control,{type:"password",placeholder:"Password",value:this.state.password,onChange:this.handlePasswordChange})]}),Object(s.jsx)(S.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}}]),a}(r.a.Component),N=function(e){Object(x.a)(a,e);var t=Object(v.a)(a);function a(e){var s;return Object(O.a)(this,a),(s=t.call(this,e)).state={username:"",password:"",error:"",msg:s.props.location.data?s.props.location.data.msg:""},s.handleUsernameChange=s.handleUsernameChange.bind(Object(f.a)(s)),s.handlePasswordChange=s.handlePasswordChange.bind(Object(f.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(f.a)(s)),s}return Object(m.a)(a,[{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={username:this.state.username,password:this.state.password};D.a.post("http://localhost:5000/user/login",a,{withCredentials:!0}).then((function(e){"login"===e.data.msg?t.setState({username:"",password:"",error:"Incorrect username/password. Please try again."}):t.auth()}))}},{key:"auth",value:function(){var e=this,t="";D.a.get("http://localhost:5000/user/auth",{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then((function(a){console.log(a.data._id),t=a.data._id,e.update(t)}))}},{key:"update",value:function(e){this.props.onChange({id:e,isLoggedIn:!0}),this.props.history.replace("/fasts")}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"text-center",children:[Object(s.jsx)("h3",{className:"mt-3 mb-3",children:"Login User"}),this.state.error&&Object(s.jsxs)(C.a,{variant:"danger",children:[" ",this.state.error," "]}),!this.state.error&&this.state.msg&&Object(s.jsxs)(C.a,{variant:"success",children:[" ",this.state.msg]}),Object(s.jsxs)(y.a,{onSubmit:this.handleSubmit,children:[Object(s.jsxs)(y.a.Group,{children:[Object(s.jsx)(y.a.Control,{type:"text",placeholder:"Username",value:this.state.username,onChange:this.handleUsernameChange}),Object(s.jsx)("br",{}),Object(s.jsx)(y.a.Control,{type:"password",placeholder:"Password",value:this.state.password,onChange:this.handlePasswordChange})]}),Object(s.jsx)(S.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}}]),a}(r.a.Component),F=a(44),E=a.n(F),L=a(161),P=a(162),U=a(151),M=a(78),T=a(152),I=function(e){Object(x.a)(a,e);var t=Object(v.a)(a);function a(e){var s;return Object(O.a)(this,a),(s=t.call(this,e)).state={id:s.props.id,start:new Date(s.props.start),end:new Date(s.props.end),difference:0,elapsed:0,progress:0},s.getDifference=s.getDifference.bind(Object(f.a)(s)),s.getElapsed=s.getElapsed.bind(Object(f.a)(s)),s.getProgress=s.getProgress.bind(Object(f.a)(s)),s.deleteFast=s.deleteFast.bind(Object(f.a)(s)),s}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDifference(),this.getElapsed()}},{key:"getDifference",value:function(){var e=(this.state.end-this.state.start)/1e3;this.setState({difference:e})}},{key:"getElapsed",value:function(){var e=this,t=(new Date-this.state.start)/1e3;this.setState({elapsed:t},(function(){e.getProgress()}))}},{key:"getProgress",value:function(){var e=this.state.elapsed/this.state.difference*100;e=e>100?100:Math.round(e),this.setState({progress:e})}},{key:"deleteFast",value:function(){this.props.deleteFast(this.state.id)}},{key:"render",value:function(){var e,t,a=this;return 100===this.state.progress?(e=Object(s.jsx)(L.a,{variant:"success",striped:!0,now:100,label:"100%"}),t=0):(e=Object(s.jsx)(L.a,{variant:"warning",animated:!0,now:this.state.progress,label:"".concat(this.state.progress,"%")}),t=Object(s.jsx)(E.a,{duration:new Date,date:this.state.end})),Object(s.jsx)("div",{children:Object(s.jsx)(P.a,{className:"text-center",border:"secondary",children:Object(s.jsxs)(P.a.Body,{children:[Object(s.jsxs)(U.a,{children:[Object(s.jsxs)(M.a,{children:["Fast Start: ",Object(s.jsx)(E.a,{format:"dddd, MMMM DD, YYYY @ hh:mm A",date:this.state.start})]}),Object(s.jsxs)(M.a,{children:["Fast End: ",Object(s.jsx)(E.a,{format:"dddd, MMMM DD, YYYY @ hh:mm A",date:this.state.end})]})]}),Object(s.jsx)("hr",{}),e,Object(s.jsx)("hr",{}),Object(s.jsxs)(U.a,{children:[Object(s.jsxs)(M.a,{className:"text-muted",children:["Total duration: ",Object(s.jsx)(E.a,{duration:this.state.start,date:this.state.end})]}),Object(s.jsx)(M.a,{children:Object(s.jsxs)(T.a,{children:[Object(s.jsx)(S.a,{variant:"outline-success",onClick:function(){a.props.history.replace("/fasts/edit/".concat(a.state.id))},children:"Edit Fast"}),Object(s.jsx)(S.a,{variant:"outline-danger",onClick:this.deleteFast,children:"Delete Fast"})]})}),Object(s.jsxs)(M.a,{className:"text-muted",children:["Time left: ",t]})]})]})})})}}]),a}(r.a.Component),Y=a(153),A=function(e){Object(x.a)(a,e);var t=Object(v.a)(a);function a(e){var s;return Object(O.a)(this,a),s=t.call(this,e),console.log(e),s.getFasts=s.getFasts.bind(Object(f.a)(s)),s.deleteFast=s.deleteFast.bind(Object(f.a)(s)),s.state={fasts:[]},s}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getFasts()}},{key:"getFasts",value:function(){var e=this,t={withCredentials:!0,headers:{"Content-Type":"application/json"},params:{id:this.props.user.id}};D.a.get("http://localhost:5000/fasts/",t).then((function(t){console.log(t),e.setState({fasts:t.data})})).catch((function(e){return console.log(e)}))}},{key:"deleteFast",value:function(e){var t=this;D.a.delete("http://localhost:5000/fasts/".concat(e)).then((function(a){t.setState({fasts:t.state.fasts.filter((function(t){return t._id!==e}))})}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"mt-3 mb-3",children:[Object(s.jsxs)("h4",{className:"text-center d-inline",children:["Logged Fasts ",Object(s.jsx)(Y.a,{pill:!0,variant:"info",children:this.state.fasts.length})]}),Object(s.jsx)(S.a,{variant:"info",className:"d-inline float-right",onClick:function(){e.props.history.replace("/fasts/add")},children:"Add Fast"})]}),this.state.fasts.map((function(t,a){return Object(s.jsxs)("div",{children:[Object(s.jsx)(I,{id:t._id,start:t.startTime,end:t.endTime,deleteFast:e.deleteFast,history:e.props.history}),Object(s.jsx)("br",{})]},t._id)})),!this.state.fasts.length&&Object(s.jsx)("div",{children:"No fasts to display."})]})}}]),a}(r.a.Component),G=function(e){Object(x.a)(a,e);var t=Object(v.a)(a);function a(e){var s;return Object(O.a)(this,a),(s=t.call(this,e)).state={msg:s.props.location.data?s.props.location.data.msg:""},s}return Object(m.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{children:[this.state.msg&&Object(s.jsx)(C.a,{className:"text-center",variant:"success",children:this.state.msg}),this.props.user.isLoggedIn&&Object(s.jsx)(A,{user:this.props.user,history:this.props.history}),!this.props.user.isLoggedIn&&Object(s.jsxs)("div",{className:"text-center",children:[Object(s.jsx)("h3",{className:"mt-3",children:"You must create an account or login to add and view your fasts."}),Object(s.jsx)(S.a,{className:"mx-3 my-3",variant:"info",href:"/user/signup",children:"Signup"}),Object(s.jsx)(S.a,{className:"mx-3 my-3",variant:"info",href:"/user/login",children:"Login"})]})]})}}]),a}(r.a.Component),_=a(36),J=a.n(_),B=function(e){Object(x.a)(a,e);var t=Object(v.a)(a);function a(e){var s;return Object(O.a)(this,a),s=t.call(this,e),console.log(s.props),s.state={startdate:new Date,enddate:new Date},s.handleStartDateChange=s.handleStartDateChange.bind(Object(f.a)(s)),s.handleEndDateChange=s.handleEndDateChange.bind(Object(f.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(f.a)(s)),s}return Object(m.a)(a,[{key:"handleStartDateChange",value:function(e){this.setState({startdate:e})}},{key:"handleEndDateChange",value:function(e){this.setState({enddate:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={startTime:this.state.startdate,endTime:this.state.enddate,user:this.props.user.id};console.log(a),D.a.post("http://localhost:5000/fasts/add",a).then((function(e){t.props.history.replace("/fasts/")}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"text-center",children:[Object(s.jsx)("h1",{className:"mt-3 mb-3",children:"Add Fast"}),Object(s.jsxs)(y.a,{onSubmit:this.handleSubmit,children:[Object(s.jsxs)(y.a.Group,{children:[Object(s.jsx)(y.a.Label,{className:"mx-2",children:"Fast Start: "}),Object(s.jsx)(J.a,{value:this.state.startdate,onChange:this.handleStartDateChange})]}),Object(s.jsxs)(y.a.Group,{children:[Object(s.jsx)(y.a.Label,{className:"mx-2",children:"Fast End: "}),Object(s.jsx)(J.a,{value:this.state.enddate,onChange:this.handleEndDateChange})]}),Object(s.jsx)(S.a,{variant:"info",type:"submit",children:"Submit"})]})]})}}]),a}(r.a.Component),R=function(e){Object(x.a)(a,e);var t=Object(v.a)(a);function a(e){var s;return Object(O.a)(this,a),s=t.call(this,e),console.log(s.props),s.state={startdate:new Date,enddate:new Date},s.handleStartDateChange=s.handleStartDateChange.bind(Object(f.a)(s)),s.handleEndDateChange=s.handleEndDateChange.bind(Object(f.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(f.a)(s)),s}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;D.a.get("http://localhost:5000/fasts/".concat(this.props.match.params.id)).then((function(t){console.log(t.data),e.setState({startdate:new Date(t.data.startTime),enddate:new Date(t.data.endTime)})})).catch((function(e){return console.log(e)}))}},{key:"handleStartDateChange",value:function(e){this.setState({startdate:e})}},{key:"handleEndDateChange",value:function(e){this.setState({enddate:e})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={startTime:this.state.startdate,endTime:this.state.enddate,user:this.props.user.id};D.a.post("http://localhost:5000/fasts/edit/".concat(this.props.match.params.id),t).then(this.props.history.replace("/fasts/"))}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"text-center",children:[Object(s.jsx)("h1",{className:"mt-3 mb-3",children:"Edit Fast"}),Object(s.jsxs)(y.a,{onSubmit:this.handleSubmit,children:[Object(s.jsxs)(y.a.Group,{children:[Object(s.jsx)(y.a.Label,{className:"mx-2",children:"Fast Start: "}),Object(s.jsx)(J.a,{value:this.state.startdate,onChange:this.handleStartDateChange})]}),Object(s.jsxs)(y.a.Group,{children:[Object(s.jsx)(y.a.Label,{className:"mx-2",children:"Fast End: "}),Object(s.jsx)(J.a,{value:this.state.enddate,onChange:this.handleEndDateChange})]}),Object(s.jsx)(S.a,{variant:"info",type:"submit",children:"Submit"})]})]})}}]),a}(r.a.Component),q=function(e){Object(x.a)(a,e);var t=Object(v.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;D.a.get("http://localhost:5000/user/logout",{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then((function(t){e.props.onChange({id:"",isLoggedIn:!1}),e.props.history.replace({pathname:"/fasts/",data:{msg:"Successfully logged out, ".concat(t.data.msg,"!")}})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(s.jsx)("div",{})}}]),a}(r.a.Component);a(138);var z=function(){var e=window.sessionStorage.getItem("user"),t=Object(n.useState)((function(){return null!==e?JSON.parse(e):{id:"",isLoggedIn:!1}})),a=Object(d.a)(t,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){window.sessionStorage.setItem("user",JSON.stringify(r))}),[r]),Object(s.jsx)(h.a,{children:Object(s.jsxs)(u.a,{fluid:!0,children:[Object(s.jsxs)(j.a,{bg:"light",expand:"lg",children:[Object(s.jsxs)(j.a.Brand,{children:[Object(s.jsx)(g.a,{width:"17",height:"17"})," SixteenAte: Fasting Tracker"]}),Object(s.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(s.jsxs)(b.a,{className:"mr-auto",children:[Object(s.jsx)(h.b,{className:"nav-link",to:"/fasts/",children:"My Fasts"}),Object(s.jsxs)(p.a,{title:"Account",id:"basic-nav-dropdown",children:[!r.isLoggedIn&&Object(s.jsx)(h.b,{className:"nav-link",to:"/user/signup",children:"Register User"}),!r.isLoggedIn&&Object(s.jsx)(h.b,{className:"nav-link",to:"/user/login",children:"Login User"}),r.isLoggedIn&&Object(s.jsx)(h.b,{className:"nav-link",to:"/user/logout",children:"Logout User"})]})]})})]}),Object(s.jsx)(l.b,{exact:!0,path:"/",children:Object(s.jsx)(l.a,{to:"/fasts"})}),Object(s.jsx)(l.b,{path:"/user/signup",render:function(e){return Object(s.jsx)(k,Object(o.a)(Object(o.a)({},e),{},{user:r,onChange:i}))}}),Object(s.jsx)(l.b,{path:"/user/login",render:function(e){return Object(s.jsx)(N,Object(o.a)(Object(o.a)({},e),{},{user:r,onChange:i}))}}),Object(s.jsx)(l.b,{exact:!0,path:"/fasts/",render:function(e){return Object(s.jsx)(G,Object(o.a)(Object(o.a)({},e),{},{user:r,onChange:i}))}}),Object(s.jsx)(l.b,{exact:!0,path:"/fasts/add",render:function(e){return Object(s.jsx)(B,Object(o.a)(Object(o.a)({},e),{},{user:r,onChange:i}))}}),Object(s.jsx)(l.b,{exact:!0,path:"/fasts/edit/:id",render:function(e){return Object(s.jsx)(R,Object(o.a)(Object(o.a)({},e),{},{user:r,onChange:i}))}}),Object(s.jsx)(l.b,{path:"/user/logout",render:function(e){return Object(s.jsx)(q,Object(o.a)(Object(o.a)({},e),{},{user:r,onChange:i}))}})]})})};c.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(z,{})}),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.5db26ba1.chunk.js.map